<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `PgDB` struct in crate `holmes`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, PgDB">

    <title>holmes::pg::PgDB - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct PgDB</p><div class="block items"><ul><li><a href="#methods">Methods</a></li></ul></div><p class='location'><a href='../index.html'>holmes</a>::<wbr><a href='index.html'>pg</a></p><script>window.sidebarCurrent = {name: 'PgDB', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>holmes</a>::<wbr><a href='index.html'>pg</a>::<wbr><a class="struct" href=''>PgDB</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../src/holmes/pg/mod.rs.html#201-206' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct PgDB { /* fields omitted */ }</pre><div class='docblock'><p>Object representing a postgres-backed fact database instance</p>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><code>impl <a class="struct" href="../../holmes/pg/struct.PgDB.html" title="struct holmes::pg::PgDB">PgDB</a></code><a href='#impl' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#208-779' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>(uri: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="struct" href="../../holmes/pg/struct.PgDB.html" title="struct holmes::pg::PgDB">PgDB</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#214-289' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Create a new PgDB object by passing in a Postgres connection string</p>
</div><h4 id='method.conn' class="method"><span id='conn.v' class='invisible'><code>fn <a href='#method.conn' class='fnname'>conn</a>(&amp;self) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="struct" href="../../r2d2/struct.PooledConnection.html" title="struct r2d2::PooledConnection">PooledConnection</a>&lt;<a class="struct" href="../../r2d2_postgres/struct.PostgresConnectionManager.html" title="struct r2d2_postgres::PostgresConnectionManager">PostgresConnectionManager</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#292-294' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Take a connection from the pool, if available</p>
</div><h4 id='method.destroy' class="method"><span id='destroy.v' class='invisible'><code>fn <a href='#method.destroy' class='fnname'>destroy</a>(uri: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#297-318' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Kick everyone off the database and destroy the data at the provided URI</p>
</div><h4 id='method.insert_fact' class="method"><span id='insert_fact.v' class='invisible'><code>fn <a href='#method.insert_fact' class='fnname'>insert_fact</a>(&amp;self, fact: &amp;<a class="struct" href="../../holmes/engine/types/struct.Fact.html" title="struct holmes::engine::types::Fact">Fact</a>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../holmes/pg/type.FactId.html" title="type holmes::pg::FactId">FactId</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#479-500' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Adds a new fact to the database, returning false if the fact was already
present in the database, and true if it was inserted.</p>
</div><h4 id='method.add_type' class="method"><span id='add_type.v' class='invisible'><code>fn <a href='#method.add_type' class='fnname'>add_type</a>(&amp;self, type_: <a class="type" href="../../holmes/pg/dyn/type.Type.html" title="type holmes::pg::dyn::Type">Type</a>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#506-519' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Registers a new type with the database.
This is unstable, and will likely need to be moved to the initialization
of the database object in order to allow reconnecting to an existing
database.</p>
</div><h4 id='method.get_type' class="method"><span id='get_type.v' class='invisible'><code>fn <a href='#method.get_type' class='fnname'>get_type</a>(&amp;self, type_str: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../holmes/pg/dyn/type.Type.html" title="type holmes::pg::dyn::Type">Type</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#525-527' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Looks for a named type in the database&#39;s registry.
This function is primarily useful for the DSL shorthand for constructing
queries, since it allows you to use names of types when declaring
functions rather than type objects.</p>
</div><h4 id='method.get_predicate' class="method"><span id='get_predicate.v' class='invisible'><code>fn <a href='#method.get_predicate' class='fnname'>get_predicate</a>(&amp;self, pred_name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../holmes/engine/types/struct.Predicate.html" title="struct holmes::engine::types::Predicate">Predicate</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#530-532' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Fetches a predicate by name</p>
</div><h4 id='method.new_predicate' class="method"><span id='new_predicate.v' class='invisible'><code>fn <a href='#method.new_predicate' class='fnname'>new_predicate</a>(&amp;self, pred: &amp;<a class="struct" href="../../holmes/engine/types/struct.Predicate.html" title="struct holmes::engine::types::Predicate">Predicate</a>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#543-577' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Persists a predicate by name
The name <em>must</em> consist only of lower case ASCII and _, anything else
will be rejected. This restriction is because the predicate name is
currently used to construct the table name.</p>

<p>In the future, this restriction could be lifted by generating table
names rather than using the names of predicates, but this helps a lot
with debugging for now.</p>
</div><h4 id='method.search_facts' class="method"><span id='search_facts.v' class='invisible'><code>fn <a href='#method.search_facts' class='fnname'>search_facts</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;query: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../holmes/engine/types/struct.Clause.html" title="struct holmes::engine::types::Clause">Clause</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;min_fact_id: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../holmes/pg/type.FactId.html" title="type holmes::pg::FactId">FactId</a>&gt;<br>) -&gt; <a class="type" href="../../holmes/pg/type.Result.html" title="type holmes::pg::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="type" href="../../holmes/pg/type.FactId.html" title="type holmes::pg::FactId">FactId</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="type" href="../../holmes/pg/dyn/type.Value.html" title="type holmes::pg::dyn::Value">Value</a>&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../src/holmes/pg/mod.rs.html#582-778' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Attempt to match the right hand side of a datalog rule against the
database, returning a list of solution assignments to the bound
variables.</p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "holmes";
    </script>
    <script src="../../main.js"></script>
    <script defer src="../../search-index.js"></script>
</body>
</html>
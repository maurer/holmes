<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `hmac` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, hmac">

    <title>hmac - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Crate hmac</p><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'hmac', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Crate <a class="mod" href=''>hmac</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/hmac/lib.rs.html#1-139' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Generic implementation of Hash-based Message Authentication Code (HMAC).</p>

<p>To use it you&#39;ll need a cryptographic hash function implementation from
RustCrypto project. You can either import specific crate (e.g. <code>sha2</code>), or
meta-crate <code>crypto-hashes</code> which reexport all related crates.</p>

<h1 id='usage' class='section-header'><a href='#usage'>Usage</a></h1>
<p>Let us demonstrate how to use HMAC using SHA256 as an example.</p>

<p>To get the authentication code:</p>

<pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">sha2</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">hmac</span>;

<span class="kw">use</span> <span class="ident">hmac</span>::{<span class="ident">Hmac</span>, <span class="ident">Mac</span>};
<span class="kw">use</span> <span class="ident">sha2</span>::<span class="ident">Sha256</span>;

<span class="comment">// Create `Mac` trait implementation, namely HMAC-SHA256</span>
<span class="kw">let</span> <span class="ident">mac</span> <span class="op">=</span> <span class="ident">Hmac</span>::<span class="op">&lt;</span><span class="ident">Sha256</span><span class="op">&gt;</span>::<span class="ident">new</span>(<span class="string">b&quot;my secret and secure key&quot;</span>);
<span class="ident">mac</span>.<span class="ident">input</span>(<span class="string">b&quot;input message&quot;</span>);

<span class="comment">// `result` has type `MacResult` which is a thin wrapper around array of</span>
<span class="comment">// bytes for providing constant time equality check</span>
<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">mac</span>.<span class="ident">result</span>();
<span class="comment">// To get &amp;[u8] use `code` method, but be carefull, since incorrect use</span>
<span class="comment">// of the code value may permit timing attacks which defeat the security</span>
<span class="comment">// provided by the `MacResult`.</span>
<span class="kw">let</span> <span class="ident">code_bytes</span> <span class="op">=</span> <span class="ident">resul</span>.<span class="ident">code</span>();</pre>

<p>To verify the message:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">mac</span> <span class="op">=</span> <span class="ident">Hmac</span>::<span class="op">&lt;</span><span class="ident">Sha256</span><span class="op">&gt;</span>::<span class="ident">new</span>(<span class="string">b&quot;my secret and secure key&quot;</span>);

<span class="ident">mac</span>.<span class="ident">input</span>(<span class="string">b&quot;input message&quot;</span>);

<span class="kw">let</span> <span class="ident">is_code_correct</span> <span class="op">=</span> <span class="ident">mac</span>.<span class="ident">verify</span>(<span class="ident">code_bytes</span>);</pre>

<h1 id='block-and-input-sizes' class='section-header'><a href='#block-and-input-sizes'>Block and input sizes</a></h1>
<p>Usually it is assumed that block size is larger than output size, due to the
generic nature of the implementation this edge case must be handled as well
to remove potential panic scenario. This is done by truncating hash output
to the hash block size if needed.</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.Hmac.html"
                                  title='struct hmac::Hmac'>Hmac</a></td>
                           <td class='docblock-short'>
                                <p>The <code>Hmac</code> struct represents an HMAC using a given hash function <code>D</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.MacResult.html"
                                  title='struct hmac::MacResult'>MacResult</a></td>
                           <td class='docblock-short'>
                                <p><code>MacResult</code> wraps a Mac code and provides a safe Eq implementation that runs
in fixed time.</p>
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="trait" href="trait.Mac.html"
                                  title='trait hmac::Mac'>Mac</a></td>
                           <td class='docblock-short'>
                                <p>The Mac trait defines methods for a Message Authentication function.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "hmac";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>